<app-dialog-header [dialogTitle]="dialogTitle"></app-dialog-header>
<form [formGroup]="reportForm" (ngSubmit)="dialogRef.close(reportForm.value)" novalidate>
    <div mat-dialog-content>
        <div class="container">
            <div class="main-fields">
                <mat-form-field>
                    <textarea matInput
                              cdkTextareaAutosize
                              cdkAutosizeMinRows="2"
                              cdkAutosizeMaxRows="3"
                              formControlName="title"
                              placeholder="Title">
                    </textarea>
                    <mat-error *ngIf="formErrors.title" class="form__error">{{ formErrors.title }}</mat-error>
                </mat-form-field>
                <app-chips [disabled]="!isCreate">
                </app-chips>
                <mat-form-field *ngIf="!isCreate">
                    <mat-select placeholder="Status" formControlName="status">
                        <mat-option *ngFor="let filteredStatus of filteredStatusList"
                                    [value]="filteredStatus"
                                    [disabled]="checkStatusOption(filteredStatus)">
                            {{filteredStatus}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field *ngIf="!isCreate">
                    <input matInput
                           formControlName="changeDate"
                           placeholder="Last date" />
                </mat-form-field>
                <ng-container *ngIf="!canEdit; then showRecipient; else showSender"></ng-container>
                <ng-template #showRecipient>
                    <mat-form-field *ngIf="!isCreate">
                        <input matInput
                               formControlName="recipient"
                               placeholder="Recipient" />
                    </mat-form-field>
                </ng-template>
                <ng-template #showSender>
                    <mat-form-field *ngIf="!isCreate">
                        <input matInput
                               formControlName="sender"
                               placeholder="Sender" />
                    </mat-form-field>
                </ng-template>
            </div>
            <div class="photo">
                <ngx-gallery [options]="galleryOptions" [images]="galleryImages"></ngx-gallery>
                <button type="button" mat-raised-button (click)="fileInput.click()">Choose File</button>
                <input hidden (change)="onFileSelected()" #fileInput type="file" id="file">
            </div>
        </div>
        <mat-form-field>
            <textarea matInput
                      class="description"
                      placeholder="Description"
                      formControlName="description" >
            </textarea>
            <mat-error *ngIf="formErrors.description" class="form__error">{{ formErrors.description }}</mat-error>
        </mat-form-field>
        <span *ngIf="!isCreate">History</span><!--TODO: Add component-->
    </div>
    <app-dialog-footer (clickSubmit)="submit()"
                       [disabled]="!valid()"
                       [submitButtonName]="submitButtonName">
    </app-dialog-footer>
</form>
